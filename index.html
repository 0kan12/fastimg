<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FastIMG</title>
<style>
    @import url('https://fonts.googleapis.com/css?family=Raleway:400,700');
    body {
        font-family: "RaleWay", sans-serif;
        max-width: 400px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f4f4f4;
        border: 1px solid #ddd;
        border-radius: 5px;
    }

    h2 {
        color: #333;
    }

    form {
        margin-bottom: 20px;
    }

    label {
        display: block;
        margin-bottom: 10px;
    }

    input {
        margin-bottom: 10px;
    }

    button {
        font-family: "RaleWay",sans-serif;
        background-color: #4caf50;
        color: #fff;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    #result {
        font-family: "RaleWay",sans-serif;
        margin-top: 20px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background-color: #fff;
    }
    #copyButton {
        display: none;
        background-color: #3498db;
        color: #fff;
        padding: 10px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-top: 10px;
    }

    #loadingLabel {
        display: none;
        margin-top: 10px;
        color: #333;
        font-weight: bold;
    }
</style>
</head>
<body>
    <h2>Resim YÃ¼kleme</h2>
    <form id="imageForm">
        <label for="imageInput">Resim SeÃ§ (PNG veya JPEG):</label>
        <input type="file" id="imageInput" accept="image/png, image/jpeg">
        <button type="button" id="uploadButton" title="Resmi yÃ¼kle">Resmi YÃ¼kle ðŸ“¤</button>
    </form>
    <div id="loadingLabel">Resminiz YÃ¼kleniyor...</div>
    <div id="result"></div>
    <button id="copyButton" onclick="copyLink()" title="Linki Kopyala">Linki Kopyala ðŸ”—</button>

    <script>
        document.getElementById('uploadButton').addEventListener('click', function() {
            var fileInput = document.getElementById('imageInput');
            var file = fileInput.files[0];

            if (file) {
                document.getElementById('loadingLabel').style.display = 'block';

                var reader = new FileReader();
                reader.readAsDataURL(file);

                reader.onload = function() {
                    var base64Content = reader.result.split(',')[1];
                    uploadToJSONBlob(base64Content);
                };
            } else {
                alert('LÃ¼tfen bir resim seÃ§in.');
            }
        });

        function uploadToJSONBlob(content) {
            var apiUrl = 'https://jsonblob.com/api/jsonBlob';
            var jsonData = { "content": content };

            fetch(apiUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(jsonData)
            })
            .then(response => {
                if (response.ok) {
                    // ID'yi Location baÅŸlÄ±ÄŸÄ±ndan al
                    var blobId = response.headers.get('Location').split('/').pop();
                    console.log("JSONBlob ID:", blobId);
                    updateResult(blobId);
                } else {
                    throw new Error('Hata: ' + response.statusText);
                }
            })
            .catch(error => {
                document.getElementById('result').innerHTML = 'Hata oluÅŸtu: ' + error.message;
            });
        }

        function updateResult(blobId) {
            var resultElement = document.getElementById('result');
            resultElement.innerHTML = 'Resim baÅŸarÄ±yla yÃ¼klendi. <br> Linkiniz: <a href="https://fastimg.dvtfl.xyz/' + blobId + '" target="_blank">https://fastimg.dvtfl.xyz/' + blobId + '</a>';
            resultElement.innerHTML += '<br> Linki kopyalamak iÃ§in "Linki Kopyala" butonunu kullanabilirsiniz.';
            document.getElementById('copyButton').style.display = 'block';
            document.getElementById('loadingLabel').style.display = 'none';
        }

        function copyLink() {
            var resultLink = document.createElement('textarea');
            resultLink.value = document.getElementById('result').getElementsByTagName('a')[0].innerText;
            document.body.appendChild(resultLink);
            resultLink.select();
            document.execCommand('copy');
            document.body.removeChild(resultLink);
            alert('Link kopyalandÄ±!');
        }
    </script>
</body>
</html>
