<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JSONBlob Resim Yükleme</title>
</head>
<body>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 400px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    
        h2 {
            color: #333;
        }
    
        form {
            margin-bottom: 20px;
        }
    
        label {
            display: block;
            margin-bottom: 10px;
        }
    
        input {
            margin-bottom: 10px;
        }
    
        button {
            background-color: #4caf50;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    
        #result {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
        }
    </style>
    
<h2>Resim Yükleme</h2>

<!-- Resim yükleme formu -->
<form id="imageForm">
    <label for="imageInput">Resim Seç:</label>
    <input type="file" id="imageInput" accept="image/png, image/jpeg">
    <button type="button" id="uploadButton" title="Resmi yükle">Resmi Yükle</button>
</form>

<!-- Sonuç gösterimi için alan -->
<div id="result"></div>

<script>
document.getElementById('uploadButton').addEventListener('click', function() {
    var fileInput = document.getElementById('imageInput');
    var file = fileInput.files[0];

    if (file) {
        var reader = new FileReader();
        reader.readAsDataURL(file);

        reader.onload = function() {
            var base64Content = reader.result.split(',')[1];
            uploadToJSONBlob(base64Content);
        };
    } else {
        alert('Lütfen bir resim seçin.');
    }
});

function uploadToJSONBlob(content) {
    var apiUrl = 'https://jsonblob.com/api/jsonBlob';
    var jsonData = { "content": content };

    fetch(apiUrl, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(jsonData)
    })
    .then(response => {
        if (response.ok) {
            // ID'yi Location başlığından al
            var blobId = response.headers.get('Location').split('/').pop();
            console.log("JSONBlob ID:", blobId);
            return blobId;
        } else {
            throw new Error('Hata: ' + response.statusText);
        }
    })
    .then(blobId => {
        document.getElementById('result').innerHTML = 'Resim başarıyla yüklendi. <br> linkiniz: <a href="https://fastimg.dvtfl.xyz/' + blobId + '" target="_blank">' + blobId + '</a>';

    })
    .catch(error => {
        document.getElementById('result').innerHTML = 'Hata oluştu: ' + error.message;
    });
}

</script>

</body>
</html>
